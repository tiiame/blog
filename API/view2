from django.shortcuts import render

# Create your views here.
from common.models import Profile, Skill
from rest_framework.decorators import api_view
from rest_framework.response import Response
from rest_framework.views import APIView
from rest_framework.permissions import IsAuthenticated
from rest_framework.serializers import ModelSerializer
from rest_framework.generics import ListAPIView , ListCreateAPIView




#function based
@api_view(['GET', 'POST'])
def get_profile_date(requests):

    if requests.method == 'POST':
        print(requests.data)
        print(type(requests.data))

    profile = Profile.objects.first()
    data = {
        'image':str(profile.image),
        'full_name': profile.full_name,
        'bio': profile.bio,
    }
    return Response(data=data,status=200)





#class based
class ProfileData(APIView):
    permission_classes = [IsAuthenticated]

    def get(self, request,format=None):
        profile = Profile.objects.first()
        data = {
            'image':str(profile.image),
            'full_name': profile.full_name,
            'bio': profile.bio,
        }
        return Response(data=data,status=200)
    
    def post(self, request,format=None):
        print(request.data)
        return Response(status=200)
    